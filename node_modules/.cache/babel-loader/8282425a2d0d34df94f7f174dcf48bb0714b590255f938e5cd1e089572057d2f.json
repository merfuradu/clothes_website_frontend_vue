{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nconst api = axios.create({\n  baseURL: 'http://localhost:8080/user',\n  headers: {\n    'Content-Type': 'application/x-www-form-urlencoded',\n    'X-Requested-With': 'XMLHttpRequest'\n  }\n});\nexport default {\n  data() {\n    return {\n      isLoading: false,\n      email: '',\n      password: '',\n      errorMessage: '',\n      token: null,\n      expires_in: null\n    };\n  },\n  methods: {\n    login() {\n      this.isLoading = true;\n      const auth = {\n        username: process.env.VUE_APP_USERNAME,\n        password: process.env.VUE_APP_PASSWORD\n      };\n      api.post('/login', {\n        grant_type: 'password',\n        username: this.email,\n        password: this.password\n      }, {\n        auth\n      }).then(response => {\n        this.token = response.data.access_token;\n        this.expires_in = response.data.expires_in;\n        const expiresMs = this.expires_in * 1000;\n        const now = new Date();\n        const expireDate = new Date(now.getTime() + expiresMs);\n        localStorage.setItem(\"expires\", expireDate);\n        localStorage.setItem('accessToken', response.data.access_token);\n        this.$store.commit(\"login\");\n        axios.defaults.headers.common['Authorization'] = `Bearer ${this.token}`;\n        this.$router.push('/products');\n      }).catch(error => {\n        console.error('Error logging in:', error);\n      }).finally(() => {\n        this.isLoading = false;\n      });\n    }\n  }\n};","map":{"version":3,"names":["axios","api","create","baseURL","headers","data","isLoading","email","password","errorMessage","token","expires_in","methods","login","auth","username","process","env","VUE_APP_USERNAME","VUE_APP_PASSWORD","post","grant_type","then","response","access_token","expiresMs","now","Date","expireDate","getTime","localStorage","setItem","$store","commit","defaults","common","$router","push","catch","error","console","finally"],"sources":["C:\\Users\\Merfu\\Desktop\\Vue-Register-Login-Project\\src\\components\\LoginItem.vue"],"sourcesContent":["<template>\r\n  <div class=\"login-container\">\r\n    <el-card class=\"login-card\">\r\n      <h2 class=\"login-title\">Login</h2>\r\n      <el-form ref=\"loginForm\" class=\"login-form\" label-position=\"top\">\r\n        <el-form-item prop=\"email\">\r\n          <el-input v-model=\"email\" placeholder=\"Email\" clearable></el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"password\">\r\n          <el-input v-model=\"password\" placeholder=\"Password\" show-password clearable></el-input>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button type=\"primary\" @click=\"login\" class=\"login-button\">Login</el-button>\r\n        </el-form-item>\r\n        <div class=\"error-message\" v-if=\"errorMessage\">{{ errorMessage }}</div>\r\n      </el-form>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nconst api = axios.create({\r\n  baseURL: 'http://localhost:8080/user',\r\n  headers: {\r\n    'Content-Type': 'application/x-www-form-urlencoded',\r\n    'X-Requested-With': 'XMLHttpRequest'\r\n  }\r\n});\r\n\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      isLoading: false,\r\n      email: '',\r\n      password: '',\r\n      errorMessage: '',\r\n      token: null,\r\n      expires_in: null,\r\n    };\r\n  },\r\n  methods: {\r\n    login() {\r\n      this.isLoading = true;\r\n      const auth = {\r\n        username: process.env.VUE_APP_USERNAME,\r\n        password: process.env.VUE_APP_PASSWORD,\r\n        \r\n      };\r\n      api.post('/login', {\r\n        grant_type: 'password',\r\n        username: this.email,\r\n        password: this.password\r\n      }, { auth })\r\n      .then(response => {\r\n        this.token = response.data.access_token;\r\n        this.expires_in = response.data.expires_in;\r\n        const expiresMs = this.expires_in * 1000;\r\n        const now = new Date();\r\n        const expireDate = new Date(now.getTime() + expiresMs);\r\n\r\n        localStorage.setItem(\"expires\", expireDate);\r\n        localStorage.setItem('accessToken', response.data.access_token);\r\n\r\n        this.$store.commit(\"login\"); \r\n        axios.defaults.headers.common['Authorization'] = `Bearer ${this.token}`;\r\n        this.$router.push('/products');\r\n      })\r\n      .catch(error => {\r\n        console.error('Error logging in:', error);\r\n      }).finally(() => {\r\n        this.isLoading = false;\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n\r\n<style scoped>\r\n.login-container {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 100vh;\r\n}\r\n\r\n.login-card {\r\n  width: 400px;\r\n}\r\n\r\n.login-title {\r\n  text-align: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.login-form {\r\n  width: 80%;\r\n  margin: 0 auto;\r\n}\r\n\r\n.login-button {\r\n  width: 100%;\r\n}\r\n\r\n.error-message {\r\n  color: red;\r\n  margin-top: 10px;\r\n}\r\n</style>"],"mappings":";AAqBA,OAAOA,KAAI,MAAO,OAAO;AACzB,MAAMC,GAAE,GAAID,KAAK,CAACE,MAAM,CAAC;EACvBC,OAAO,EAAE,4BAA4B;EACrCC,OAAO,EAAE;IACP,cAAc,EAAE,mCAAmC;IACnD,kBAAkB,EAAE;EACtB;AACF,CAAC,CAAC;AAGF,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,SAAS,EAAE,KAAK;MAChBC,KAAK,EAAE,EAAE;MACTC,QAAQ,EAAE,EAAE;MACZC,YAAY,EAAE,EAAE;MAChBC,KAAK,EAAE,IAAI;MACXC,UAAU,EAAE;IACd,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IACPC,KAAKA,CAAA,EAAG;MACN,IAAI,CAACP,SAAQ,GAAI,IAAI;MACrB,MAAMQ,IAAG,GAAI;QACXC,QAAQ,EAAEC,OAAO,CAACC,GAAG,CAACC,gBAAgB;QACtCV,QAAQ,EAAEQ,OAAO,CAACC,GAAG,CAACE;MAExB,CAAC;MACDlB,GAAG,CAACmB,IAAI,CAAC,QAAQ,EAAE;QACjBC,UAAU,EAAE,UAAU;QACtBN,QAAQ,EAAE,IAAI,CAACR,KAAK;QACpBC,QAAQ,EAAE,IAAI,CAACA;MACjB,CAAC,EAAE;QAAEM;MAAK,CAAC,EACVQ,IAAI,CAACC,QAAO,IAAK;QAChB,IAAI,CAACb,KAAI,GAAIa,QAAQ,CAAClB,IAAI,CAACmB,YAAY;QACvC,IAAI,CAACb,UAAS,GAAIY,QAAQ,CAAClB,IAAI,CAACM,UAAU;QAC1C,MAAMc,SAAQ,GAAI,IAAI,CAACd,UAAS,GAAI,IAAI;QACxC,MAAMe,GAAE,GAAI,IAAIC,IAAI,CAAC,CAAC;QACtB,MAAMC,UAAS,GAAI,IAAID,IAAI,CAACD,GAAG,CAACG,OAAO,CAAC,IAAIJ,SAAS,CAAC;QAEtDK,YAAY,CAACC,OAAO,CAAC,SAAS,EAAEH,UAAU,CAAC;QAC3CE,YAAY,CAACC,OAAO,CAAC,aAAa,EAAER,QAAQ,CAAClB,IAAI,CAACmB,YAAY,CAAC;QAE/D,IAAI,CAACQ,MAAM,CAACC,MAAM,CAAC,OAAO,CAAC;QAC3BjC,KAAK,CAACkC,QAAQ,CAAC9B,OAAO,CAAC+B,MAAM,CAAC,eAAe,IAAK,UAAS,IAAI,CAACzB,KAAM,EAAC;QACvE,IAAI,CAAC0B,OAAO,CAACC,IAAI,CAAC,WAAW,CAAC;MAChC,CAAC,EACAC,KAAK,CAACC,KAAI,IAAK;QACdC,OAAO,CAACD,KAAK,CAAC,mBAAmB,EAAEA,KAAK,CAAC;MAC3C,CAAC,CAAC,CAACE,OAAO,CAAC,MAAM;QACf,IAAI,CAACnC,SAAQ,GAAI,KAAK;MACxB,CAAC,CAAC;IACJ;EACF;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}